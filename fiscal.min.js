/* Fiscal by Mark Herhold - MIT Licensed */
(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Fiscal=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var Quarter=require("./lib/Quarter");var FiscalYear=require("./lib/FiscalYear");function getYearDeltaForCalendarMonth(fiscalMonth,monthNum){if(fiscalMonth===0){return 0}if(monthNum>=fiscalMonth){return 1}else{return 0}}var Fiscal=function(){function Fiscal(fiscalMonth){_classCallCheck(this,Fiscal);this.fiscalMonth=fiscalMonth}_createClass(Fiscal,[{key:"getFiscalInfoForDate",value:function getFiscalInfoForDate(date){date=date||new Date;var fiscalYear=date.getFullYear()+getYearDeltaForCalendarMonth(this.fiscalMonth,date.getMonth());var fy=new FiscalYear(fiscalYear,this.fiscalMonth);var quarter=new Quarter(fy,date.getMonth());return{fiscalYear:fy,quarter:quarter,calendar:{calendarMonth:date.getMonth(),calendarYear:date.getFullYear()}}}}]);return Fiscal}();module.exports=Fiscal},{"./lib/FiscalYear":2,"./lib/Quarter":3}],2:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}var FiscalYear=function(){function FiscalYear(fiscalYear,fiscalMonth){_classCallCheck(this,FiscalYear);this.fiscalYear=fiscalYear;this.fiscalMonth=fiscalMonth}_createClass(FiscalYear,[{key:"previous",value:function previous(){return new FiscalYear(this.fiscalYear-1,this.fiscalMonth)}},{key:"next",value:function next(){return new FiscalYear(this.fiscalYear+1,this.fiscalMonth)}},{key:"startDate",get:function get(){var tmp;if(this.fiscalMonth===0){tmp=new Date(this.fiscalYear,this.fiscalMonth)}else{tmp=new Date(this.fiscalYear-1,this.fiscalMonth)}return tmp}},{key:"endDate",get:function get(){return new Date(this.fiscalYear,this.fiscalMonth,0,23,59,59,999)}}]);return FiscalYear}();module.exports=FiscalYear},{}],3:[function(require,module,exports){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function createQuarterMap(fiscalMonth){var quarterMap={};for(var monthCount=fiscalMonth;monthCount<fiscalMonth+12;monthCount++){var monthNum=monthCount%12;if(monthCount<fiscalMonth+3){quarterMap[monthNum]={quarterNum:1,quarterStr:"Q1"}}else if(monthCount<fiscalMonth+6){quarterMap[monthNum]={quarterNum:2,quarterStr:"Q2"}}else if(monthCount<fiscalMonth+9){quarterMap[monthNum]={quarterNum:3,quarterStr:"Q3"}}else{quarterMap[monthNum]={quarterNum:4,quarterStr:"Q4"}}}return quarterMap}var Quarter=function(){function Quarter(fy,month){_classCallCheck(this,Quarter);this.fy=fy;this._month=month;this._quarterMap=createQuarterMap(this.fy.fiscalMonth)}_createClass(Quarter,[{key:"previous",value:function previous(){var tmpFY=this.fy;var tmpMonth=this._month;if(this.number===1){tmpFY=this.fy.previous()}if(tmpMonth<=2){tmpMonth=12+(tmpMonth-3)}else{tmpMonth-=3}return new Quarter(tmpFY,tmpMonth)}},{key:"next",value:function next(){var tmpFY=this.fy;var tmpMonth=this._month;if(this.number===4){tmpFY=this.fy.next()}if(tmpMonth>=9){tmpMonth=tmpMonth+3-12}else{tmpMonth+=3}return new Quarter(tmpFY,tmpMonth)}},{key:"number",get:function get(){return this._quarterMap[this._month].quarterNum}},{key:"string",get:function get(){return this._quarterMap[this._month].quarterStr}},{key:"startDate",get:function get(){return new Date(this.fy.startDate.getFullYear(),this.fy.fiscalMonth+(this.number-1)*3)}},{key:"endDate",get:function get(){return new Date(this.fy.startDate.getFullYear(),this.fy.fiscalMonth+this.number*3,0)}}]);return Quarter}();module.exports=Quarter},{}]},{},[1])(1)});